<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<style>
    body{
    margin:0;
    padding:0;
    }
	#main,#main2,#main3{
	height:500px;
	width:900px;
	margin-left:-450px;
	top:110px;
	position:absolute;
    
	float:left;
	z-index:10;
	background-color:black;
	
	}
	#main2{
	background-color:red;
	}
	#main3{
	background-color:grey;
	}
	#menu{
	height:100px;
	width:1000px;
	background-color:blue;
	position:fixed;
	left:0;
	right:0;
	z-index:15;
	margin:auto;
	}
	.down{
	top:-10px;
	transition:1s;
	}
	#bt{
	width:50px;
	top:-50px;
	height:50px;
	position:relative;
	}
	
	
	li{
	display:inline;
	margin-left:50px;
	}
	ul{
	float:left;
	width:80%;
	z-index:11;
	top:-50px;
	margin-top:-90px;
	bottom:0;
	margin:auto;
	left:300px;
	list-style-type:none;
	padding-top:50px;
	
	}
	.vis{
	z-index:1;
	visibility:visible;
	}
	.hid{
	z-index:1;
	visibility:hidden;
	}
	.right{
	left:200%;
	transition:5s;
	}
	.mid{
	left:50%;
	transition:5s;
	}
	.left{
	left:-3000px;
	transition:5s;
	}
	.rright{
	left:3000px;
	}
    #call{
    position:relative;
    left:200px;
    }
    #slide{
    background-color:green;
    height:700px;
    width:100%;
    margin:auto;
    right:0;
    position:absolute;
    left:0;
    top:0;
    }
    #news{
    background-color:yellow;
    position:absolute;
    left:0;
    width:100%;margin-top:700px;
    height:250px;
    margin-bottom:200px;
    }
    .new{
    width:900px;
    height:250px;
    left:0;
    right:0;
    margin:auto;
    background-color:blue;
    }
</style>
</head>
<body>

<div id="menu" class="down">
<h1 id="call" class="vis">
DDDDDDDDDDDDDD
</h1>
<input id="bt"  type="image" src="menuimg1.jpg" value="button"></input>
   <ul id="spis"class="hid" style="margin-top: -90px;">
     <li>Чебурашка</li>
     <li>Крокодил Гена</li>
     <li>Шапокляк</li>
     <li>Крыса Лариса</li>
   </ul>
  
</span>	
</div>
<div id="slide">
<div id="main" class="mid">
	
</div>
<div id="main2" class="rright">
	
</div>
<div id="main3" class="left">
	
</div>
</div>
<div id="news">
	<div class="new">Привет!</div>
</div>

<script>
    var num = 1;
    var xml = new XMLHttpRequest();
    xml.open('GET','txt.txt');
    xml.send();
   // alert(xml.responseText);
	//setInterval('alert("l")',100); 
	var y = 250;
	var x = 1;
	
	setInterval(foo, 5000);
	//foo();

	function foo () {
		 if (((x-1)%3+1) == 1) {
			 main.classList.toggle("left");
			 main2.classList.toggle("mid");
			 main.classList.toggle("mid");
			 main2.classList.toggle("rright");
			 main3.classList.toggle("rright");
			 main3.classList.toggle("left");
			 
		 } else if (((x-1)%3+1) == 2) {
			 main2.classList.toggle("left");
			 main3.classList.toggle("mid");
			 main2.classList.toggle("mid");
			 main3.classList.toggle("rright");
			 main.classList.toggle("rright");
			 main.classList.toggle("left");
		 } else {
			 main3.classList.toggle("left");
			 main.classList.toggle("mid");
			 main3.classList.toggle("mid");
			 main.classList.toggle("rright");
			 main2.classList.toggle("rright");
			 main2.classList.toggle("left");
		 }
		 x++;
		 if (x == 4) x = 1;
	};
	bt.addEventListener("click", show);
	function show(event){
	spis.classList.toggle("vis");
	spis.classList.toggle("hid");
	call.classList.toggle("vis");
	call.classList.toggle("hid");}
	 var box;
	//main.style.top= y +"px";
	//y += 100*x;
	//x *= -1;
    box =  document.getElementById('news').getBoundingClientRect();
    alert(box.bottom);
	//if (document.documentElement.clientHeight-box)
	setInterval(dda, 1000);
	function dda(){
    box =  document.getElementById('news').getBoundingClientRect();
    if ((document.documentElement.clientHeight-box.bottom)>=200){
	var o=document.createElement('div');
    o.innerHTML = xml.responseText;
    m_im = document.createElement("img");
    m_im.src = "menuimg" + 1 +".jpg" ;
    m_im.style.width =  50+"px";
    m_im.style.height =  50+"px";
    o.appendChild(m_im);
    o.classList.add("new");
    document.getElementById('news').appendChild(o);
    y += 250;
    document.getElementById('news').style.height = y + "px" ; 

    m_im = document.createElement("img");
    
    }
	}
	
   //alert(document.getElementById('news').lastChild.BoundingClientRect());
	alert(document.documentElement.clientHeight);
    //if ((document.documentElement.clientWidth-document.getElementById('news').lastChild.BoundingClientRect().bottom)>200) {

	//}
	
    
    
 
	
</script>
</body>
</html>